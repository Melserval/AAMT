<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>таблицы сложения и умножения</title>
	<style>
		body {
			background-color: #aaa;
		}
		.tables-wrapper div {
			display: inline-block;
		}
		.tables-wrapper table {
			border-collapse: collapse;
		}
		.tables-wrapper table th, .tables-wrapper table td {
			border: 2px solid #222;
			font-size: 22px;
			font-family: Arial, Verdana, sans-serif;
			width: 50px;
			height: 50px;
			text-align: center;
			cursor: default;
			user-select: none;
		}
		.tables-wrapper table th {
			color: #c13a07;
			background-color: black;
		}
		.tables-wrapper table td {
			background-color: #e6c97c;
		}

		.tables-wrapper table th.guide {
			background-color: #333;
			color: white;
		}

		.tables-wrapper table td.guide {
			background-color: #b59f64;
		}

		.tables-wrapper table td.point {
			background-color: #000;
			color: #fff;
			font-weight: bold;
		}

	</style>
</head>
<body>
	<div class="tables-wrapper">
		<div>
			<table>
				<tbody id="table-add">
					<tr>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<th></th>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div>
			<table>
				<tbody id="table-product">
					<tr>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 	<th></th>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr>
					 <tr>
					 	<th></th>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 	<td></td>
					 </tr> 
				</tbody>
			</table>
		</div>
	</div>
	<script>
		function tableProcessor(tbody, callbackCalc) {
			// заполнение таблиц данными.
			for (let i = 0; i < tbody.rows.length; i++) 
			{
				for (let j = 0; j < tbody.rows[i].cells.length; j++) 
				{
					if (j == 0 && i == 0) continue;
					if (j == 0) {
						tbody.rows[i].cells[j].textContent = i - 1;
					}
					else if (i == 0) {
						tbody.rows[i].cells[j].textContent = j - 1;
					}
					else {
						tbody.rows[i].cells[j].textContent = callbackCalc(i-1, j-1);
					}
				}
			}

			// такой сложный код окраски/очистки направляющих использован
			// что бы избежать очистки и переокраски элементов при уводе
			// курсора на тот же ряд или на туже колонку. Это позволило
			// избежать пересоздания функции очистки на покидаемом элементе.
			// P.S. 
			// и хотелось поломадь голову, над не самым очевидным решением.
			// 
			// Принцип работы такой: изменение ячеек от изначального расположения до нового. 
			// При перемещении мыши в сторону большего индекса - ячеики будут доокрашены.
			// При перемещении же в сторону меньшего индекса - ячейки будут очищены.

			// очистка направляющих
			tbody.addEventListener('mouseout', function (e) {
				if (e.target.nodeName != 'TD') return;

				const row = e.target.parentElement.rowIndex;
				const cell = e.target.cellIndex;
				// start - дефолтные начальные позиции
				let srow = 0;
				let scell = 0;

				// если курсор ушел на другую ячейку - тогда очищаются только лишние клетки.
				if (e.toElement?.nodeName == 'TD') {
					// если ряд тот же самый - определяется граница колонок.
					if (e.toElement.parentElement.rowIndex == row) {
						scell = e.toElement.cellIndex;
					}
					// если колонка таже самая - определяется граница рядов.
					if (e.toElement.cellIndex == cell) {
						srow = e.toElement.parentElement.rowIndex;
					}
				}

				for (let i = srow; i < row; i++) {
					tbody.rows[i].cells[cell].className = "";
				}

				for (let i = scell; i < cell; i++) {
					tbody.rows[row].cells[i].className = "";
				}
				e.target.className = "";
			});

			// отрисовка направляющих
			tbody.addEventListener('mouseover', function (e) {
				if (e.target.nodeName != 'TD') return;

				const row = e.target.parentElement.rowIndex;
				const cell = e.target.cellIndex;
				// start - начальные позиции
				let srow = 0;
				let scell = 0;

				// если курсор пришел с другой ячейки, тогда (ДО)окрашиваются
				// только необходимые ячейки, а не весь ряд или строка.
				if (e.relatedTarget?.nodeName == 'TD') {
					// если ряд тот же самый - определяется граница колонок.
					if (e.relatedTarget.parentElement.rowIndex == row) {
						scell = e.relatedTarget.cellIndex;
					}
					// если колонка таже самая - определяется граница рядов.
					if (e.relatedTarget.cellIndex == cell) {
						srow = e.relatedTarget.parentElement.rowIndex;
					}
				}

				for (let i = srow; i < row; i++) {
					tbody.rows[i].cells[cell].className = "guide";
				}

				for (let i = scell; i < cell; i++) {
					tbody.rows[row].cells[i].className = "guide";
				}
				e.target.className = "point";
			});
		}

		tableProcessor(document.getElementById("table-add"), (a, b) => a + b);
		tableProcessor(document.getElementById("table-product"), (a, b) => a * b);
	</script>
</body>
</html>